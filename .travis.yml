sudo: false
dist: precise # because it's still supporting PHP 5.3
language: php
matrix:
  include:
    - php: 5.3
      dist: precise
    - php: 5.4
    - php: 5.5
    - php: 5.6
    - php: 7.0
    - php: 7.1
    - php: 7.2
    - php: nightly
  allow_failures:
    - php: nightly
  fast_finish: true

branches:
  only:
    - devel
    - master

before_script:
  - wget -O phpunit.phar https://phar.phpunit.de/phpunit-4.8.phar

script:
  - php phpunit.phar --version
  - php phpunit.phar -v -c tests/phpunit.xml

notifications:
  email: false
  irc:
    channels:
      - "asimov.freenode.net#mobiledetect"
    template:
      - "%{repository} (%{commit}): %{message}. Build details: %{build_url}"
      - "%{author} said %{commit_subject}. See %{compare_url}"
